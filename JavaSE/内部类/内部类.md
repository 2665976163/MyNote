# 内部类

分为：成员内部类，静态内部类，局部内部类，匿名内部类

java因为单继承的局限性，提倡多实现，内部类的出现可以解决这个问题，但是需要多创类.

## 1. 成员内部类

### 1. 特点

​	**成员内部类不能有静态成员，除非是静态常量.**

​	  java类加载时，先执行加载外部类，再加载内部类，最后初始化内部类中的变量。java中要加载内部类必须在实例化外部类之后完成，而这个时候如果内部类中的变量是静态的就会在类加载时被提前初始化。
       也就是说，**在外部类还没有实例化，内部类还没有被加载的时候，内部类的属性就已经起作用了，这样明显是有矛盾的，所以java不允许这样做**。而java常量放在内存中常量池，它的机制与变量是不同的，编译时，加载常量是不需要加载类的，所以就没有上面那种矛盾。

其实我觉得，既然内部类没有被实例化，那么也就无法使用内部类的静态属性，就算内部类的静态属性被初始化了也没有任何作用。所以java不允许非静态内部类有静态变量，只能说是合理的规定。

```java
class TestClass{
    class Node{
        public static final int value = 123;
        public void add(){
            
        }
    }
}
//创建实例
public static void main(String args[]){
    TestClass.Node test_1 = new TestClass().new Node();
}
```

> 创建内部类对象

```java
外部类.内部类  test_1 = new 外部类().new 内部类();
```

> 内部类调用外部类属性或方法

```java
外部类名.this.[属性|方法]
```

> 同级外部类继承当前类中内部类

```java
class inner_test_1{
    class inner_2{

    }
}
class inner_test_2 extends inner_test_1.inner_2{
    public inner_test_2() {
        new inner_test_1().super();
    }
}
```

其他类若想继承内部类则需要在该类构造器中new该类的内部类的外部类对象.super













## 2.静态内部类

### 1. 特点

​	静态内部类与外部类区别不大，外部类可以有的属性或方法，静态内部类都可以有.

那为什么不定义在外面？

​	因为外部类不能用private 修饰，有些类我只想当前一个类可以使用，不依赖其他类，则可以定义

私有静态内部类。

​	外部类若不能调用其他类的属性或方法，则静态内部类也不能，因为静态内部类初始化时，外部类中的实例成员还没有诞生，若想调用则创建外部类的实例.

> 创建静态内部类对象方式

```java
public class Main {
    public static void main(String[] args) {
        new inner_test_1.inner_2(); //外部类不需要括号
    }
}
class inner_test_1{
    public static class inner_2{
        public int a = 123;
    }
}
```

> 内部类调用外部类属性||方法

```java
若调用静态则直接类名.变量名，若调用非静态则new 对象
```

> 同级外部类继承当前类中内部类

```java
class inner_test_1{
    static class inner_2{

    }
}
class inner_test_2 extends inner_test_1.inner_2{
    
}
```



































## 3.局部内部类

### 1.特点

​	本身与成员内部类区别不大，但局部内部类作用域正常来说被限制了范围，仅限方法，代码块中

(可以用return返回对象然后利用父类接收(外界不知道有这个类存在)，只能多态使用)，外部无法正常调用

，除了这些之外，局部内部类中可以调用方法中的变量(1.7之前若想调用必须加final 但 1.8之后可以不加，

但必须保证变量不能被改变(重写赋值)).

> 创建局部内部类对象

```java
class Test{
    public static void main(String[] args){
        class TestClass{}
        new TestClass();	//创建了一个局部内部类对象
    }
}
```

> 利用多态将局部内部类返回出去

```java
class Test{
    public static void main(String[] args){
        A b = getBean();	//通过多态获取到了局部内部类的对象
        b.add();
        b.show();
    } 
    public static A getBean(){
        class B extends A{
            @Overide
            void add(){
                System.out.println("你好");
            }
            @Overide
            void show(){
                System.out.println("我很好");
            }
        }
        return new B();
    }
}
class A{
    void add(){}
    void show(){}
}
```

局部内部类只有同一个局部类可以继承，因为外界根本不知道有这个局部类的存在

局部类的优点就是销毁快，平常的类一般很难销毁，因为一直在使用，而局部内部类是在方法体..中，

方法体一旦结束，局部类就会被销毁了.

























## 4.匿名内部类

### 1.特点

​	匿名内部类与局部内部类区别不是很大，只不过匿名内部类只能实现一个接口或继承一个类，